
Testing real CleaveJoin spacing issue...
=== Scenario 1: Text with trailing spaces ===
Original content:
  Line 1: 'Line with trailing spaces   ' (display width: 28)
  Line 2: 'Another line' (display width: 12)
  Line 3: 'Third line' (display width: 10)
After split at column 15:
Left parts:
  'Line with trai' (width: 14)
  'Another line' (width: 12)
  'Third line' (width: 10)
Right parts:
  'ling spaces   ' (width: 14)
  '' (width: 0)
  '' (width: 0)
Join calculation (with fix):
  Line 1: left_len=14, padding_needed=0, padding='', result='Line with trailing spaces   '
  Line 1:
    Left: 'Line with trai' (width: 14)
    Right: 'ling spaces   '
    Padding needed: 0
    Padding: ''
    Combined: 'Line with trailing spaces   '
    Combined width: 28
  Line 2: No right content, using left as-is: 'Another line'
  Line 2:
    Left: 'Another line' (width: 14)
    Right: ''
    Padding needed: 0
    Padding: ''
    Combined: 'Another line'
    Combined width: 12
  Line 3: No right content, using left as-is: 'Third line'
  Line 3:
    Left: 'Third line' (width: 14)
    Right: ''
    Padding needed: 0
    Padding: ''
    Combined: 'Third line'
    Combined width: 10
Final rejoined content:
  'Line with trailing spaces   '
  'Another line'
  'Third line'
Comparison with original:
  MATCH: 'Line with trailing spaces   ' vs 'Line with trailing spaces   '
  MATCH: 'Another line' vs 'Another line'
  MATCH: 'Third line' vs 'Third line'

=== Scenario 2: Mixed content with CJK ===
Original content:
  Line 1: 'Hello 你好 World' (display width: 16)
  Line 2: 'Test 测试 line' (display width: 14)
  Line 3: 'Simple line' (display width: 11)
After split at column 10:
  Left: 'Hello 你好' | Right: ' World'
  Left: 'Test 测试' | Right: ' line'
  Left: 'Simple li' | Right: 'ne'
  Join line 1: left_len=10, padding_needed=-1, result='Hello 你好 World'
  Join line 2: left_len=9, padding_needed=0, result='Test 测试 line'
  Join line 3: left_len=9, padding_needed=0, result='Simple line'
Test completed.
